<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml">

    <ui:define name="title">Validation d'une désinscription</ui:define>
    <ui:define name="viewname">
        <li>CONTRIBUTEUR</li>
        <li><i class="pi pi-chevron-right"></i></li>
        <li><p:link
                outcome="/desinscription-contributeur/valider-rejeter-desinscription-contributeur">VALIDATION D'UNE DESINSCRIPITION</p:link>
        </li>
    </ui:define>
    <ui:define name="content">

        <div class="grid ">
            <div class="col-12 xl:col-5">
                <div class="card overflow-y-scroll" style="height:90vh ">
                    <h3 class="font-bold mb-2">
                        Validation d'une désinscription</h3>

                    <h:form id="listContributeursForm">
                        <div class="flex mt-3 mb-2">
                            <div class="flex-1 flex flex-column">
                                <h5>Liste des contributeurs (#{validationDeDesinscriptionDeContributeurMB.contributeurs.size()}) </h5>
                            </div>
                        </div>
                        <div class="grid">
                            <div class="col-12">
                                <p:dataTable id="contribs"
                                             scrollable="true"
                                             scrollHeight="500"
                                             reflow="true"
                                             styleClass="products-table"
                                             lazy="false"
                                             var="contributeur"
                                             value="#{validationDeDesinscriptionDeContributeurMB.contributeurs}"
                                             emptyMessage="Aucun contributeur disponible"
                                             rowKey="#{contributeur.ID}"
                                             selection="#{validationDeDesinscriptionDeContributeurMB.contributeur}"
                                             selectionMode="single">
                                    <p:ajax event="rowSelect" update="detailContributeurForm"/>
                                    <p:column headerText="Raison sociale">
                                        <h:outputText value="#{contributeur.raisonSociale}"/>
                                    </p:column>
                                    <p:column headerText="Contact téléphonique">
                                        <h:outputText value="#{contributeur.contactTelephonique}"/>
                                    </p:column>
                                    <p:column headerText="Nom du dirigeant">
                                        <h:outputText value="#{contributeur.nomDirigeant}"/>
                                    </p:column>
                                </p:dataTable>
                            </div>
                        </div>
                    </h:form>
                </div>
            </div>
            <div class="col-12 xl:col-7">
                <div>
                    <div class="card overflow-y-scroll" style="height: 65vh ">
                        <div class="grid">
                            <h:form id="detailContributeurForm">
                                <div class="col-12 ">
                                    <h6 class="my-3"><i class="pi pi-info-circle"></i> Détails du contributeur </h6>
                                    <div class="ui-fluid formgrid grid">
                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Raison sociale"/>
                                            <p:inputText id="contribRs" readonly="true"
                                                         placeholder="Saisir la raison social"
                                                         value="#{validationDeDesinscriptionDeContributeurMB.contributeur.raisonSociale}"/>
                                        </div>
                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Contact téléphonique"/>
                                            <p:inputText id="idContactContrib" readonly="true"
                                                         value="#{validationDeDesinscriptionDeContributeurMB.contributeur.contactTelephonique}"/>
                                        </div>
                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Contact élétronique"/>
                                            <p:inputText id="idContactElectron" readonly="true"
                                                         value="#{validationDeDesinscriptionDeContributeurMB.contributeur.contactTelephonique}"/>
                                        </div>
                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Profil du contributeur"/>
                                            <p:inputText id="idProfil" readonly="true"
                                                         value="#{validationDeDesinscriptionDeContributeurMB.contributeur.profilContributeur}"/>
                                        </div>
                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Type de contributeur"/>
                                            <p:inputText id="idTypeContrib" readonly="true"
                                                         value="#{validationDeDesinscriptionDeContributeurMB.contributeur.typeContributeur}"/>
                                        </div>
                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Profil du contributeur"/>
                                            <p:inputText id="idStatutContrib" readonly="true"
                                                         value="#{validationDeDesinscriptionDeContributeurMB.contributeur.statutContributeur}"/>
                                        </div>
                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Identifiant social"/>
                                            <p:inputText id="idSocial" readonly="true"
                                                         value="#{validationDeDesinscriptionDeContributeurMB.contributeur.identifiantSocial}"/>
                                        </div>
                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Identifiant fiscal"/>
                                            <p:inputText id="idFiscal" readonly="true"
                                                         value="#{validationDeDesinscriptionDeContributeurMB.contributeur.identifiantSocial}"/>
                                        </div>
                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Référence agrément"/>
                                            <p:inputText id="idAgrement" readonly="true"
                                                         value="#{validationDeDesinscriptionDeContributeurMB.contributeur.referenceAgrement}"/>
                                        </div>
                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Emetteur d'agrément"/>
                                            <p:inputText id="idEmetteurAgrement" readonly="true"
                                                         value="#{validationDeDesinscriptionDeContributeurMB.contributeur.emetteurAgrement}"/>
                                        </div>
                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Adresse postale"/>
                                            <p:inputText id="idAdressePostale" readonly="true"
                                                         value="#{validationDeDesinscriptionDeContributeurMB.contributeur.adressePostale}"/>
                                        </div>
                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Adresse géographique"/>
                                            <p:inputText id="idAdresseGeo" readonly="true"
                                                         value="#{validationDeDesinscriptionDeContributeurMB.contributeur.adresseGeographique}"/>
                                        </div>
                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Nom du dirigeant"/>
                                            <p:inputText id="idNonDirigeant" readonly="true"
                                                         value="#{validationDeDesinscriptionDeContributeurMB.contributeur.nomDirigeant}"/>
                                        </div>
                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Mobile du dirigeant"/>
                                            <p:inputText id="idMobileDirigeant" readonly="true"
                                                         value="#{validationDeDesinscriptionDeContributeurMB.contributeur.mobileDirigeant}"/>
                                        </div>
                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Fonction du dirigeant"/>
                                            <p:inputText id="idFonctionDirigeant" readonly="true"
                                                         value="#{validationDeDesinscriptionDeContributeurMB.contributeur.fonctionDirigeant}"/>
                                        </div>
                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel for="@next" value="Description des activités "/>
                                            <p:inputTextarea rows="3" maxlength="255" readonly="true"
                                                             value="#{validationDeDesinscriptionDeContributeurMB.contributeur.descriptionActivites}"/>
                                        </div>
                                    </div>
                                    <h5 class="my-3 "> Liste des règlements (#{validationDeDesinscriptionDeContributeurMB.listeReglements.size()})</h5>
                                    <div class="col-12">
                                        <p:dataTable id="idReglementTable" widgetVar="dtReglement"
                                                     scrollable="true"
                                                     scrollHeight="300"
                                                     reflow="true"
                                                     styleClass="products-table"
                                                     lazy="false"
                                                     var="reglement"
                                                     value="#{validationDeDesinscriptionDeContributeurMB.listeReglements}"
                                                     emptyMessage="Aucun règlement disponible"
                                                     rowKey="#{reglement.ID}">
                                            <p:column headerText="Code ">
                                                <h:outputText value="#{reglement.ID}"/>
                                            </p:column>
                                        </p:dataTable>
                                    </div>
                                    <h5 class="my-3 ">Liste des transactions (#{validationDeDesinscriptionDeContributeurMB.listeTransactions.size()}) </h5>
                                    <div class="col-12">
                                        <p:dataTable id="transactions" widgetVar="dtTransactions"
                                                     scrollable="true"
                                                     scrollHeight="300"
                                                     reflow="true"
                                                     styleClass="products-table"
                                                     lazy="false"
                                                     var="transaction"
                                                     value="#{validationDeDesinscriptionDeContributeurMB.listeTransactions}"
                                                     emptyMessage="Aucune transaction disponible"
                                                     rowKey="#{transaction.ID}">
                                            <p:column headerText="Code ">
                                                <h:outputText value="#{transaction.ID}"/>
                                            </p:column>
                                        </p:dataTable>
                                    </div>
                                    <h5 class="my-3 ">Liste des détails de commission (#{validationDeDesinscriptionDeContributeurMB.commissionsNonEchusEtNonPayes.size()})
                                    </h5>
                                    <div class="col-12">
                                        <p:dataTable id="commission" widgetVar="dtCommission"
                                                     scrollable="true"
                                                     scrollHeight="300"
                                                     reflow="true"
                                                     styleClass="products-table"
                                                     lazy="false"
                                                     var="commission"
                                                     value="#{validationDeDesinscriptionDeContributeurMB.commissionsNonEchusEtNonPayes}"
                                                     emptyMessage="Aucune commission disponible"
                                                     rowKey="#{commission.ID}">
                                            <p:column headerText="Code ">
                                                <h:outputText value="#{commission.ID}"/>
                                            </p:column>
                                        </p:dataTable>
                                    </div>
                                    <h5 class="my-4 ">Liste des pays (#{validationDeDesinscriptionDeContributeurMB.listePays.size()})
                                    </h5>
                                    <div class="col-12">
                                        <p:dataTable id="idPaysTable" widgetVar="dtCommission"
                                                     scrollable="true"
                                                     scrollHeight="300"
                                                     reflow="true"
                                                     styleClass="products-table"
                                                     lazy="false"
                                                     var="pays"
                                                     value="#{validationDeDesinscriptionDeContributeurMB.listePays}"
                                                     emptyMessage="Aucun pays disponible"
                                                     rowKey="#{commission.ID}">
                                            <p:column headerText="Indicatif">
                                                <h:outputText value="#{pays.indicatifInternational}"/>
                                            </p:column>
                                            <p:column headerText="Nom">
                                                <h:outputText value="#{pays.nom}"/>
                                            </p:column>
                                            <p:column headerText="Nationnalité">
                                                <h:outputText value="#{pays.nationalite}"/>
                                            </p:column>
                                            <p:column headerText="Action">

                                            </p:column>
                                        </p:dataTable>
                                    </div>
                                </div>
                            </h:form>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="card">
                            <h:form id="validationContributeurForm">
                                <div class="formgrid ui-fluid">
                                    <div class="field col-12">
                                        <p:outputLabel for="@next" value="Faire une annotation"/>
                                        <p:inputTextarea rows="3" cols="255" maxlength="255"
                                                         value="#{validationDeDesinscriptionDeContributeurMB.annotationContributeur.commentaire}"/>
                                    </div>
                                    <div class=" col-12 flex gap-2">
                                        <p:commandButton value="Valider"
                                                         update="listContributeursForm,detailContributeurForm,validationContributeurForm"
                                                         action="#{validationDeDesinscriptionDeContributeurMB.autoriserLaDesinscriptionDuContributeur()}"
                                                         process="validationContributeurForm" icon="pi pi-check"
                                                         styleClass="w-auto"/>
                                        <p:commandButton value="Rejeter"
                                                         update="listContributeursForm,detailContributeurForm,validationContributeurForm"
                                                         action="#{validationDeDesinscriptionDeContributeurMB.rejeterLaDesinscriptionDuContributeur()}"
                                                         process="validationContributeurForm" icon="pi pi-times"
                                                         styleClass="w-auto"/>
                                    </div>
                                </div>
                            </h:form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </ui:define>
</ui:composition>
